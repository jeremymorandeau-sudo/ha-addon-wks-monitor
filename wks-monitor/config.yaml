name: "WKS Monitor"
version: "2.0.2"
slug: "wks_monitor"
description: "Lecture des onduleurs WKS/Voltronic en parallèle (QPGS0–2) et publication MQTT, avec probes QPIRI/QPIGS et paramétrage MKS (dry-run)."
arch:
  - amd64
startup: application
boot: auto
uart: true
init: false
homeassistant_api: false
image: "ghcr.io/jeremymorandeau-sudo/wks-monitor-{arch}"

options:
  port: "/dev/serial/by-id/usb-Prolific_Technology_Inc._USB-Serial_Controller_BWAAc143M08-if00-port0"
  baudrate: 2400
  mqtt_host: "core-mosquitto"
  mqtt_port: 1883
  mqtt_topic: "wks"
  scan_interval: 5
  apply_settings_on_start: false
  set_output_priority: 2
  set_charge_priority: 2
  set_ac_charge_current: 20
  set_pv_charge_current: 60
  set_float_voltage: 54.8
  set_bulk_voltage: 56.4
  set_back_to_grid_voltage: 48.0
  set_back_to_battery_voltage: 51.0
  dry_run: false

schema:
  port: str
  baudrate: int
  mqtt_host: str
  mqtt_port: int
  mqtt_topic: str
  scan_interval: int
  apply_settings_on_start: bool
  set_output_priority: int
  set_charge_priority: int
  set_ac_charge_current: int
  set_pv_charge_current: int
  set_float_voltage: float
  set_bulk_voltage: float
  set_back_to_grid_voltage: float
  set_back_to_battery_voltage: float
  dry_run: bool

icon: "icon.png"
logo: "logo.png"
