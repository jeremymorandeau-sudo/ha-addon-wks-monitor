name: "WKS Monitor"
version: "2.0.1-serial-fix"
slug: "wks_monitor"
description: "Lecture fiable des onduleurs WKS/Voltronic (QPGS0–2) + MQTT — gestion série robuste"
arch:
  - amd64
startup: application
boot: auto
uart: true
init: false
homeassistant_api: false
apparmor: false

options:
  port: "/dev/serial/by-id/usb-Prolific_Technology_Inc._USB-Serial_Controller_BWAAc143M08-if00-port0"
  baudrate: 2400
  inverter_count: 3
  poll_interval: 2.0
  mqtt_host: "core-mosquitto.local.hass.io"
  mqtt_port: 1883
  mqtt_user: "jeremy"
  mqtt_password: ""
  mqtt_topic_prefix: "wks"
  debug: true
  read_timeout: 2.5
  open_retry_sec: 3
  max_consecutive_fail: 10

schema:
  port: str
  baudrate: int
  inverter_count: int
  poll_interval: float
  mqtt_host: str
  mqtt_port: int
  mqtt_user: str
  mqtt_password: password
  mqtt_topic_prefix: str
  debug: bool
  read_timeout: float
  open_retry_sec: int
  max_consecutive_fail: int

privileged:
  - SYS_RAWIO

stdin: true
ingress: false
ports: {}